{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1612144591368,"links":[],"panels":[{"datasource":null,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":6,"w":24,"x":0,"y":0},"id":9,"options":{"content":"* Watch reorganization occurring on nodes\n\n  Different nodes may occur the different reorganization.\n\n  This feature is by subscribing to the tip change.","mode":"markdown"},"pluginVersion":"7.3.1","timeFrom":null,"timeShift":null,"title":"Notes","type":"text"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"influxdb-ckb","fieldConfig":{"defaults":{"custom":{"align":null,"filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":6},"hiddenSeries":false,"id":6,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"reorganization","orderByTime":"ASC","policy":"default","query":"SELECT count(distinct(\"new_tip_number\")) FROM \"reorganization\" WHERE (\"network\" =~ /^$network$/) AND $timeFilter GROUP BY time($__interval) fill(null)","rawQuery":false,"refId":"A","resultFormat":"time_series","select":[[{"params":["new_tip_number"],"type":"field"},{"params":[],"type":"distinct"},{"params":[],"type":"count"}]],"tags":[{"key":"network","operator":"=~","value":"/^$network$/"}]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Reorganization Traffic","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":"influxdb-ckb","fieldConfig":{"defaults":{"custom":{"align":null,"filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":9,"w":24,"x":0,"y":14},"id":7,"options":{"showHeader":true,"sortBy":[{"desc":true,"displayName":"Time"}]},"pluginVersion":"7.3.1","targets":[{"groupBy":[],"measurement":"reorganization","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"table","select":[[{"params":["*"],"type":"field"}]],"tags":[{"key":"network","operator":"=~","value":"/^$network$/"},{"condition":"AND","key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"timeFrom":null,"timeShift":null,"title":"Reorganization Logs of $hostname","transformations":[{"id":"organize","options":{"excludeByName":{"hostname":true,"network":true},"indexByName":{"Time":0,"ancestor_hash":9,"ancestor_number":2,"attached_length":1,"hostname":5,"network":6,"new_tip_hash":8,"new_tip_number":3,"old_tip_hash":7,"old_tip_number":4},"renameByName":{"ancestor_hash":"Ancestor Hash","ancestor_number":"Ancestor Number","attached_length":"Scale","new_tip_hash":"New Tip Hash","new_tip_number":"New Tip Number","old_tip_hash":"Old Tip Hash","old_tip_number":"Old Tip Number"}}}],"type":"table"}],"refresh":false,"schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":false,"text":"aggron","value":"aggron"},"datasource":"influxdb-ckb","definition":"","error":null,"hide":0,"includeAll":false,"label":"Network","multi":false,"name":"network","options":[],"query":"SHOW TAG VALUES  WITH KEY = \"network\" ","refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":"aggron-sydney","value":"aggron-sydney"},"datasource":"influxdb-ckb","error":null,"hide":0,"includeAll":false,"label":"Hostname","multi":false,"name":"hostname","options":[],"query":"SHOW TAG VALUES WITH KEY = \"hostname\" WHERE network = '$network'","refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-30m","to":"now"},"timepicker":{},"timezone":"","title":"Reorganization","uid":"k4p6k41Mz","version":5}
