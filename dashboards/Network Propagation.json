{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"description":"A Network Prober","editable":true,"gnetId":null,"graphTooltip":1,"id":null,"iteration":1612142873171,"links":[],"panels":[{"datasource":null,"fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"gridPos":{"h":7,"w":24,"x":0,"y":0},"id":10,"options":{"content":"* The data source is a external network prober.\n\n  The external network prober connect to all public\npeers, and record the network propagation\nfrom its view.\n\n\n* Most of time the \"High Latency Table\" and\n\"High Latency Logs\" is no-data state. It is OK.","mode":"markdown"},"pluginVersion":"7.3.1","timeFrom":null,"timeShift":null,"title":"Notes","type":"text"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"influxdb-ckb","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":24,"x":0,"y":7},"hiddenSeries":false,"id":8,"legend":{"alignAsTable":true,"avg":true,"current":false,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"total public peers","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["previous"],"type":"fill"}],"limit":"","measurement":"peers","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["peers_total"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"network","operator":"=~","value":"/^$network$/"},{"condition":"AND","key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Total Public Peers","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"influxdb-ckb","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":15},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"alias":"propagation-99th","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"propagation","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["time_interval"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[{"key":"network","operator":"=~","value":"/^$network$/"},{"condition":"AND","key":"hostname","operator":"=~","value":"/^$hostname$/"},{"condition":"AND","key":"message_type","operator":"=","value":"compact_block"},{"condition":"AND","key":"percentile","operator":"=","value":"99"}]},{"alias":"propagation-80th","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"propagation","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["time_interval"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[{"key":"network","operator":"=~","value":"/^$network$/"},{"condition":"AND","key":"hostname","operator":"=~","value":"/^$hostname$/"},{"condition":"AND","key":"message_type","operator":"=","value":"compact_block"},{"condition":"AND","key":"percentile","operator":"=","value":"80"}]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Compact Block Propagation","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3156","format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:3157","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"influxdb-ckb","fieldConfig":{"defaults":{"custom":{}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":12,"y":15},"hiddenSeries":false,"id":3,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.3.1","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"alias":"propagation-99th","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"propagation","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["time_interval"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[{"key":"network","operator":"=~","value":"/^$network$/"},{"condition":"AND","key":"hostname","operator":"=~","value":"/^$hostname$/"},{"condition":"AND","key":"message_type","operator":"=","value":"transaction_hash"},{"condition":"AND","key":"percentile","operator":"=","value":"99"}]},{"alias":"propagation-80th","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"measurement":"propagation","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["time_interval"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[{"key":"network","operator":"=~","value":"/^$network$/"},{"condition":"AND","key":"hostname","operator":"=~","value":"/^$hostname$/"},{"condition":"AND","key":"message_type","operator":"=","value":"transaction_hash"},{"condition":"AND","key":"percentile","operator":"=","value":"80"}]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Transaction Propagation","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2951","format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2952","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":"influxdb-ckb","fieldConfig":{"defaults":{"custom":{"align":null,"filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":24},"id":5,"options":{"showHeader":true},"pluginVersion":"7.3.1","targets":[{"groupBy":[{"params":["addr"],"type":"tag"}],"measurement":"high_latency","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"table","select":[[{"params":["time_interval"],"type":"field"},{"params":[],"type":"count"}],[{"params":["time_interval"],"type":"field"},{"params":[],"type":"max"}]],"tags":[{"key":"network","operator":"=~","value":"/^$network$/"},{"condition":"AND","key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"timeFrom":null,"timeShift":null,"title":"High Latency Of Block Propagation Table","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{"Time":2,"addr":0,"time_interval":1},"renameByName":{"addr":"Peer","count":"Count of Time Interval Greater Than 8s","max":"Max Time Interval (ms)","time_interval":"Time Interval (ms)"}}}],"type":"table"},{"datasource":"influxdb-ckb","fieldConfig":{"defaults":{"custom":{"align":null,"filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":24},"id":6,"options":{"showHeader":true},"pluginVersion":"7.3.1","targets":[{"groupBy":[{"params":["addr"],"type":"tag"}],"measurement":"high_latency","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"table","select":[[{"params":["time_interval"],"type":"field"}]],"tags":[{"key":"network","operator":"=~","value":"/^$network$/"},{"condition":"AND","key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"timeFrom":null,"timeShift":null,"title":"High Latency Of Block Propagation Logs","transformations":[{"id":"organize","options":{"excludeByName":{},"indexByName":{"Time":2,"addr":0,"time_interval":1},"renameByName":{"addr":"Peer","time_interval":"Time Interval (ms)"}}}],"type":"table"}],"refresh":false,"schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"text":"lina","value":"lina"},"datasource":"influxdb-ckb","definition":"","error":null,"hide":0,"includeAll":false,"label":"Network","multi":false,"name":"network","options":[],"query":"SHOW TAG VALUES  WITH KEY = \"network\" ","refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":"lina-hangzhou","value":"lina-hangzhou"},"datasource":"influxdb-ckb","definition":"","error":null,"hide":0,"includeAll":false,"label":"Hostname","multi":false,"name":"hostname","options":[],"query":"SHOW TAG VALUES WITH KEY = \"hostname\" WHERE network = '$network'","refresh":2,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"auto":false,"auto_count":30,"auto_min":"10s","current":{"selected":false,"text":"1m","value":"1m"},"error":null,"hide":2,"label":"Interval","name":"interval","options":[{"selected":true,"text":"1m","value":"1m"},{"selected":false,"text":"10m","value":"10m"},{"selected":false,"text":"30m","value":"30m"},{"selected":false,"text":"1h","value":"1h"},{"selected":false,"text":"6h","value":"6h"},{"selected":false,"text":"12h","value":"12h"},{"selected":false,"text":"1d","value":"1d"},{"selected":false,"text":"7d","value":"7d"},{"selected":false,"text":"14d","value":"14d"},{"selected":false,"text":"30d","value":"30d"}],"query":"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d","refresh":2,"skipUrlSync":false,"type":"interval"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"","title":"Network Propagation","uid":"G55zAYTGz","version":9}
